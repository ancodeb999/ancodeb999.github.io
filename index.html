<!DOCTYPE html>
<html lang="zh-CN" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ancodeb</title>
  <meta name="description" content="ancodeb 的数字花园 · 代码、思考与碎碎念" />
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Markdown 解析 -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <!-- 代码高亮：Atom One Dark -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>hljs.highlightAll();</script>

  <style>
    :root {--primary: #a78bfa; --bg: #0f0f1a; --text: #e0e7ff; --card: rgba(30,20,70,0.5);}
    @media (prefers-color-scheme: light) {
      :root {--bg: #fafafa; --text: #1f2937; --card: rgba(255,255,255,0.8);}
    }
    body {background:var(--bg); color:var(--text); transition:all .5s;}
    body.light {--bg:#fafafa; --text:#1f2937; --card:rgba(255,255,255,0.8);}
    .glass {background:var(--card); backdrop-filter:blur(20px); border:1px solid rgba(167,139,250,0.2);}
    #progress {position:fixed; top:0; left:0; z-index:50; height:4px; background:linear-gradient(90deg,#7c3aed,#a78bfa); transform-origin:0%; box-shadow:0 0 20px rgba(167,139,250,0.6);}
    .neon-text {text-shadow:0 0 20px rgba(167,139,250,0.5);}
    article img {max-width:100%; border-radius:12px; margin:1.5rem 0;}
    pre {overflow-x:auto; border-radius:12px; padding:1rem !important;}
  </style>
</head>
<body class="min-h-screen font-mono antialiased">

  <div id="progress"></div>

  <!-- Header -->
  <header class="fixed top-0 w-full z-40 glass border-b border-purple-500/20">
    <div class="max-w-6xl mx-auto px-6 py-5 flex justify-between items-center">
      <h1 class="text-3xl font-black">
        <a href="#" onclick="showList()" class="bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent neon-text">ancodeb</a>
      </h1>
      <div class="flex items-center gap-8">
        <button onclick="showList()" class="hover:text-purple-400">Posts</button>
        <button id="theme-toggle" class="p-2 rounded-lg hover:bg-white/10">
          <svg class="w-5 h-5 hidden dark:inline" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
          <svg class="w-5 h-5 dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg>
        </button>
      </div>
    </div>
  </header>

  <!-- 主容器 -->
  <main class="pt-24 px-6 max-w-5xl mx-auto">

    <!-- 文章列表 -->
    <div id="list-view">
      <section class="pt-10 pb-32">
        <h2 class="text-5xl font-black text-center mb-16 neon-text">Recent Posts</h2>
        <div id="posts-grid" class="grid gap-8 md:grid-cols-2 lg:grid-cols-3"></div>
      </section>
    </div>

    <!-- 文章阅读视图 -->
    <article id="post-view" class="hidden prose prose-invert max-w-3xl mx-auto pb-32">
      <div class="glass rounded-3xl p-10 md:p-16">
        <button onclick="showList()" class="mb-8 text-purple-400 hover:underline">&larr; 返回列表</button>
        <div id="post-content"></div>
      </div>
    </article>
  </main>

  <footer class="py-12 text-center opacity-60 text-sm">
    © 2025 ancodeb · Powered by caffeine & Markdown
  </footer>

  <script>
    const posts = [];
    const grid = document.getElementById('posts-grid');
    const postView = document.getElementById('post-view');
    const postContent = document.getElementById('post-content');


    const postFiles = [
      "2025-11-30-Download.md",

    ];

    // 如果你部署在 Vercel/Netlify，云函数可以自动读取，这里先用手动方式，零配置最稳
    postFiles.reverse().forEach(filename => {
      fetch(`posts/${filename}`)
        .then(r => r.text())
        .then(md => {
          const title = filename.slice(11, -3).replace(/-/g, ' ');
          const date = filename.slice(0, 10);
          const html = marked.parse(md);
          const temp = document.createElement('div');
          temp.innerHTML = html;
          const firstParagraph = temp.textContent.trim().split('\n')[0].slice(0, 140) + '...';

          const card = document.createElement('div');
          card.className = "glass rounded-2xl overflow-hidden hover:shadow-2xl hover:shadow-purple-500/30 transition-all duration-500 hover:-translate-y-3 cursor-pointer group";
          card.innerHTML = `
            <div class="h-52 bg-gradient-to-br from-purple-600/80 to-pink-600/80 group-hover:scale-110 transition-transform duration-700"></div>
            <div class="p-6">
              <time class="text-sm opacity-70">${date}</time>
              <h3 class="text-2xl font-bold mt-2 mb-3 group-hover:text-purple-400 transition">${title}</h3>
              <p class="text-gray-400 line-clamp-3">${firstParagraph}</p>
              <div class="mt-5 text-purple-400 font-medium">阅读全文 →</div>
            </div>
          `;
          card.onclick = () => showPost(title, date, html);
          grid.appendChild(card);
        });
    });

    function showPost(title, date, html) {
      document.title = title + " - ancodeb";
      postContent.innerHTML = `<h1 class="text-4xl md:text-5xl font-black mb-4 neon-text">${title}</h1>
                               <time class="text-purple-400 opacity-80">${date}</time>
                               <div class="mt-8 markdown-body">${html}</div>`;
      document.getElementById('list-view').classList.add('hidden');
      postView.classList.remove('hidden');
      window.scrollTo(0, 0);
    }

    function showList() {
      document.title = "ancodeb";
      document.getElementById('list-view').classList.remove('hidden');
      postView.classList.add('hidden');
    }
  </script>
</body>
</html>
